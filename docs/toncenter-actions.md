# TON Center Actions Endpoint

The toncenter v3 REST API exposes an `/actions` endpoint that aggregates
transactional events for a given account. The autogenerated OpenAPI examples in
some toncenter references include placeholder query values such as
`tx_hash=string`. Passing those placeholders verbatim results in a `422` schema
validation error, as demonstrated in the request below.

```
curl -s "https://toncenter.com/api/v3/actions?account=<ACCOUNT>&tx_hash=string" \
  -H "accept: application/json"
```

The response contains the following error payload:

```
{"error":"failed to decode: schema: error converting value for index 0 of \"trace_id\""}
```

## Correct Usage

Only provide filters that contain real values. Omit placeholders entirely when a
filter is not required. You can also request the same data programmatically via
`TonDataCollector.fetch_account_actions` which automatically drops empty
filters.

### Example CLI Request

```bash
curl -s "https://toncenter.com/api/v3/actions" \
  --get \
  --data-urlencode "account=EQDSmz4RrDBFG-T1izwVJ7q1dpAq1mJTLrKwyMYJig6Wx_6y" \
  --data-urlencode "limit=10" \
  --data-urlencode "sort=desc"
```

### Using `TonDataCollector`

```python
import asyncio
from dynamic_ton.data_pipeline import TonDataCollector

async def main() -> None:
    collector = TonDataCollector()
    actions = await collector.fetch_account_actions(
        account="EQDSmz4RrDBFG-T1izwVJ7q1dpAq1mJTLrKwyMYJig6Wx_6y",
        limit=10,
        include_accounts=True,
    )
    for action in actions:
        print(action.action_id, action.type, action.success)

asyncio.run(main())
```

## Recommended Next Steps

- Store valid hashes, trace IDs, or action IDs in configuration so that scripts
  never ship with placeholders.
- Use an authenticated toncenter API key for production workloads to benefit
  from higher rate limits.
- Capture and log the error payload when a request fails to simplify future
  diagnostics.
